---
title: "Irish School"
layout: base.njk
permalink: /
css: ["slider.css"]
js: ["slider.js"]
components: 
  - name: "posts-list-with-images"
    filter: programas
    style: "parrilla"
    order: orden
    heading: "Nuestros programas"

  - name: "posts-puzzle"
    filter: nosotros
    limit: 3
    random: true
    heading: "Conócenos"
    link: ["Saber más", "/sobre-nosotros/"]

  - name: call-to-action
    filter: calltoaction

---

<div class="main-carousel nojava"
  data-flickity='{ "cellAlign": "left", "wrapAround": true, "prevNextButtons": true, "autoPlay": 5000,  "pauseAutoPlayOnHover": false }'>
  {% set listado = collections.slider | sortByOrder %}
  {% for item in listado %}
    {% set link = item.url | url %}
    <div class="carousel-cell">
      {% if item.data.imagencabecera %}
        {% set alt = item.data.title %}
        {% imagen item.data.imagencabecera,
        alt,
        '',
        '100vw' %}
      {% endif %}
      <div class="texto wrapper">
        <h2>{{ item.data.title }}</h2>
        {{ item.content | safe }}
      </div>
    </div>
  {% endfor %}
</div>

<!-- Webinars  -->
<div class="verde">
  <section id="webinars" class="webinars-section wrapper">
    <h2>Webinars informativos Irlanda</h2>

    <!-- Mensaje de confirmación (oculto inicialmente) -->
    <div id="mensaje-exito" class="mensaje-exito" style="display: none;">
      <p>✓ Tu solicitud ha sido enviada correctamente. Recibirás la información en tu email.</p>
    </div>

    <!-- Formulario -->
    <form id="form-webinar" class="form-webinar">
      <div class="form-group">
        <label for="programa">Programa de interés:</label>
        <select id="programa" name="programa" required>
          <option selected value="">Selecciona un programa...</option>
          <option value="Primer trimestre">Primer Trimestre</option>
          <option value="Medio Trimestre">Medio Trimestre</option>
          <option value="Inmersión en Familia">Inmersión en Familia</option>
          <option value="Irish Daycamp">Irish Daycamp</option>
        </select>
      </div>

      <div class="form-group">
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required placeholder="Introduce tu email">
      </div>

      <button type="submit" id="btn-enviar">Solicitar información</button>
      <span id="loading" style="display: none;">Enviando...</span>
    </form>
  </section>
</div>

<script>
  document
    .getElementById('form-webinar')
    .addEventListener('submit', async function (e) {
      e.preventDefault();

      const form = this;
      const btnEnviar = document.getElementById('btn-enviar');
      const loading = document.getElementById('loading');
      const mensajeExito = document.getElementById('mensaje-exito');

      // Deshabilitar botón y mostrar loading
      btnEnviar.disabled = true;
      btnEnviar.style.display = 'none';
      loading.style.display = 'inline';

      // Recoger datos
      const formData = new FormData(form);

      try {
        // Enviar al PHP en tu otro servidor
        const response = await fetch('https://forms.idenautas.work/irishschool-webinars.php', {
          method: 'POST',
          body: formData
        });

        if (response.ok) {
          // Mostrar mensaje de éxito
          mensajeExito.style.display = 'block';

          // Resetear formulario
          form.reset();

          // Scroll suave al mensaje
          mensajeExito.scrollIntoView({behavior: 'smooth', block: 'nearest'});

          // Ocultar mensaje después de 5 segundos
          setTimeout(() => {
            mensajeExito.style.display = 'none';
          }, 5000);

        } else {
          alert('Hubo un error al enviar el formulario. Por favor, inténtalo de nuevo.');
        }

      } catch (error) {
        alert('Error de conexión. Por favor, verifica tu conexión e inténtalo de nuevo.');
        console.error('Error:', error);
      } finally {
        // Rehabilitar botón después de 3 segundos (previene doble envío)
        setTimeout(() => {
          btnEnviar.disabled = false;
          btnEnviar.style.display = 'inline-block';
          loading.style.display = 'none';
        }, 3000);
      }
    });
</script>